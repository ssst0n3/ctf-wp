# -*- coding: cp936 -*-
# jjencode可以选择global variable,默认为`$`。出题人将`$`替换成了`''`而已。这里，我们把所有可能出现全局变量的地方补上就可以了
# 出现全局变量的地方可能有
# 1. 0-9,a-f,'l','o','t','u'这些字符串存储在全局变量(字典)中，需要通过全局变量调用。
# 2. 前缀中的初始化操作
# 3. 使用八进制混淆的字符，需要通过全局变量调用数字，与1的形式相同
# 

import jjencoder
import re

# 固定前缀
prefix = r'$=~[];$={___:++$,$$$$:(![]+"")[$],__$:++$,$_$_:(![]+"")[$],_$_:++$,$_$$:({}+"")[$],$$_$:($[$]+"")[$],_$$:++$,$$$_:(!""+"")[$],$__:++$,$_$:++$,$$__:({}+"")[$],$$_:++$,$$$:++$,$___:++$,$__$:++$};$.$_=($.$_=$+"")[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+"")[$.__$])+((!$)+"")[$._$$]+($.__=$.$_[$.$$_])+($.$=(!""+"")[$.__$])+($._=(!""+"")[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!""+"")[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];'
s = r"""=~[];={___:++,$$$$:(![]+"")[],__$:++,$_$_:(![]+"")[],_$_:++,$_$$:({}+"")[],$$_$:([]+"")[],_$$:++,$$$_:(!""+"")[],$__:++,$_$:++,$$__:({}+"")[],$$_:++,$$$:++,$___:++,$__$:++};.$_=(.$_=+"")[.$_$]+(._$=.$_[.__$])+(.$$=(.$+"")[.__$])+((!)+"")[._$$]+(.__=.$_[.$$_])+(.$=(!""+"")[.__$])+(._=(!""+"")[._$_])+.$_[.$_$]+.__+._$+.$;.$$=.$+(!""+"")[._$$]+.__+._+.$+.$$;.$=(.___)[.$_][.$_];.$(.$(.$$+"\""+.$$$_+"\\"+.__$+.$$_+.$$_+.$_$_+(![]+"")[._$_]+"("+.$$$$+._+"\\"+.__$+.$_$+.$$_+.$$__+.__+"\\"+.__$+.$_$+.__$+._$+"\\"+.__$+.$_$+.$$_+"(\\"+.__$+.$$_+.___+","+.$_$_+","+.$$__+",\\"+.__$+.$_$+._$$+","+.$$$_+","+.$$_$+"){"+.$$$_+"="+.$$$$+._+"\\"+.__$+.$_$+.$$_+.$$__+.__+"\\"+.__$+.$_$+.__$+._$+"\\"+.__$+.$_$+.$$_+"("+.$$__+"){\\"+.__$+.$$_+._$_+.$$$_+.__+._+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.$$_+"("+.$$__+"<"+.$_$_+"?'':"+.$$$_+"(\\"+.__$+.$$_+.___+.$_$_+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$$_+._$$+.$$$_+"\\"+.__$+.__$+.__$+"\\"+.__$+.$_$+.$$_+.__+"("+.$$__+"/"+.$_$_+")))+(("+.$$__+"="+.$$__+"%"+.$_$_+")>"+._$$+.$_$+"?\\"+.__$+._$_+._$$+.__+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.__$+"\\"+.__$+.$_$+.$$_+"\\"+.__$+.$__+.$$$+"."+.$$$$+"\\"+.__$+.$$_+._$_+._$+"\\"+.__$+.$_$+.$_$+"\\"+.__$+.___+._$$+"\\"+.__$+.$_$+.___+.$_$_+"\\"+.__$+.$$_+._$_+"\\"+.__$+.___+._$$+._$+.$$_$+.$$$_+"("+.$$__+"+"+._$_+.$__$+"):"+.$$__+"."+.__+._$+"\\"+.__$+._$_+._$$+.__+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.__$+"\\"+.__$+.$_$+.$$_+"\\"+.__$+.$__+.$$$+"("+._$$+.$$_+"))};\\"+.__$+.$_$+.__$+.$$$$+"(!''.\\"+.__$+.$$_+._$_+.$$$_+"\\"+.__$+.$$_+.___+(![]+"")[._$_]+.$_$_+.$$__+.$$$_+"(/^/,\\"+.__$+._$_+._$$+.__+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.__$+"\\"+.__$+.$_$+.$$_+"\\"+.__$+.$__+.$$$+")){\\"+.__$+.$$_+.$$$+"\\"+.__$+.$_$+.___+"\\"+.__$+.$_$+.__$+(![]+"")[._$_]+.$$$_+"("+.$$__+"--)"+.$$_$+"["+.$$$_+"("+.$$__+")]=\\"+.__$+.$_$+._$$+"["+.$$__+"]||"+.$$$_+"("+.$$__+");\\"+.__$+.$_$+._$$+"=["+.$$$$+._+"\\"+.__$+.$_$+.$$_+.$$__+.__+"\\"+.__$+.$_$+.__$+._$+"\\"+.__$+.$_$+.$$_+"("+.$$$_+"){\\"+.__$+.$$_+._$_+.$$$_+.__+._+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.$$_+"\\"+.$__+.___+.$$_$+"["+.$$$_+"]}];"+.$$$_+"="+.$$$$+._+"\\"+.__$+.$_$+.$$_+.$$__+.__+"\\"+.__$+.$_$+.__$+._$+"\\"+.__$+.$_$+.$$_+"(){\\"+.__$+.$$_+._$_+.$$$_+.__+._+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.$$_+"'\\\\\\\\\\"+.__$+.$$_+.$$$+"+'};"+.$$__+"="+.__$+"};\\"+.__$+.$$_+.$$$+"\\"+.__$+.$_$+.___+"\\"+.__$+.$_$+.__$+(![]+"")[._$_]+.$$$_+"("+.$$__+"--)\\"+.__$+.$_$+.__$+.$$$$+"(\\"+.__$+.$_$+._$$+"["+.$$__+"])\\"+.__$+.$$_+.___+"=\\"+.__$+.$$_+.___+".\\"+.__$+.$$_+._$_+.$$$_+"\\"+.__$+.$$_+.___+(![]+"")[._$_]+.$_$_+.$$__+.$$$_+"(\\"+.__$+.$_$+.$$_+.$$$_+"\\"+.__$+.$$_+.$$$+"\\"+.$__+.___+"\\"+.__$+._$_+._$_+.$$$_+"\\"+.__$+.$__+.$$$+"\\"+.__$+.___+.$_$+"\\"+.__$+.$$$+.___+"\\"+.__$+.$$_+.___+"('\\\\\\\\"+.$_$$+"'+"+.$$$_+"("+.$$__+")+'\\\\\\\\"+.$_$$+"','\\"+.__$+.$__+.$$$+"'),\\"+.__$+.$_$+._$$+"["+.$$__+"]);\\"+.__$+.$$_+._$_+.$$$_+.__+._+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.$$_+"\\"+.$__+.___+"\\"+.__$+.$$_+.___+"}('<"+.$___+">"+.$__+"(/"+.$$_+"/);<!--"+.__$+"."+.___+"."+.___+"."+._$_+"/"+.$$$+"/--><!--"+.$_$+"{"+._$$+"}--></"+.$___+">',"+.$$_+._$_+","+.$__$+",'|"+.__$+.___+"||"+._$$+.$__+.$_$$+.$$$_+.$_$+.$_$$+.$$__+.$_$$+.$$_+.$$__+.$$_+.$$$$+.___+.$_$$+.$$__+.$$$$+.$$__+.$$_+._$_+.$___+.$$_$+.$__$+.$$$_+._$$+.$__$+.___+.$$_$+.__$+._$$+.$_$$+.$_$_+.$$_+"|"+.$_$_+(![]+"")[._$_]+.$$$_+"\\"+.__$+.$$_+._$_+.__+"|"+.$$$$+(![]+"")[._$_]+.$_$_+"\\"+.__$+.$__+.$$$+.__$+._$_+"|\\"+.__$+.$_$+.___+.$_$_+"\\"+.__$+.$_$+.___+.$_$_+"|\\"+.__$+.$_$+.__$+"\\"+.__$+.$_$+.$$_+.$$__+(![]+"")[._$_]+._+.$$_$+.$$$_+.$$$$+"\\"+.__$+.$_$+.__$+(![]+"")[._$_]+.$$$_+"|\\"+.__$+.$$_+._$$+.$$__+"\\"+.__$+.$$_+._$_+"\\"+.__$+.$_$+.__$+"\\"+.__$+.$$_+.___+.__+"'.\\"+.__$+.$$_+._$$+"\\"+.__$+.$$_+.___+(![]+"")[._$_]+"\\"+.__$+.$_$+.__$+.__+"('|'),"+.___+",{}))"+"\"")())();"""

# $是一个字典，.***之前必然需要一个$。但是这里要注意"."作为字符出现的情况
# print re.findall("\.[^(\$|_)]", s)
s = re.sub('\.(?=\$|_)', '$.', s)
# 找到主体部分,替换前缀
s = s[s.find('$.$($.$($.$$'):]
s = prefix + s

print s
print jjencoder.jjdecode(s)
